version: '3.8'

services:
  # PostgreSQL MCP Server (HTTP/SSE transport for remote access)
  postgresql-mcp-server:
    build: .
    container_name: postgresql-mcp-server
    ports:
      - "3000:3000"
    environment:
      # MCP Server Settings
      MCP_HOST: 0.0.0.0
      MCP_PORT: 3000
      MCP_API_KEY: ${MCP_API_KEY}
      CORS_ORIGINS: ${CORS_ORIGINS:-*}
      
      # PostgreSQL connection
      POSTGRES_HOST: ${POSTGRES_HOST}
      POSTGRES_PORT: ${POSTGRES_PORT:-5432}
      POSTGRES_DB: ${POSTGRES_DB}
      POSTGRES_USER: ${POSTGRES_USER}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_READONLY: ${POSTGRES_READONLY:-false}
      POSTGRES_SSLMODE: ${POSTGRES_SSLMODE:-prefer}
      
      # Connection pool settings
      POSTGRES_POOL_MIN: ${POSTGRES_POOL_MIN:-1}
      POSTGRES_POOL_MAX: ${POSTGRES_POOL_MAX:-10}
      QUERY_TIMEOUT: ${QUERY_TIMEOUT:-30}
    restart: unless-stopped


